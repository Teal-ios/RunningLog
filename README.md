# ğŸƒâ€â™‚ï¸ RunningLog

**ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì ê³¼ ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ê³ ê¸‰ ëŸ¬ë‹ ì¶”ì  iOS ì•±**

## ğŸ“± ì•± ê°œìš”

RunningLogëŠ” iOS ë„¤ì´í‹°ë¸Œ ëŸ¬ë‹ ì¶”ì  ì•±ìœ¼ë¡œ, GPS ê¸°ë°˜ì˜ ì •í™•í•œ ëŸ¬ë‹ ì¶”ì , ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´, HealthKit ì—°ë™, ìœ„ì ¯ ì§€ì› ë“± í¬ê´„ì ì¸ ëŸ¬ë‹ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ¯ ëŸ¬ë‹ ì¶”ì 
- **ì •í™•í•œ GPS ì¶”ì **: Kalman Filter ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•œ GPS ë…¸ì´ì¦ˆ ì œê±° ë° ì •í™•ë„ í–¥ìƒ
- **ì‹¤ì‹œê°„ ë°ì´í„°**: ê±°ë¦¬, ì‹œê°„, í˜ì´ìŠ¤, ì¹¼ë¡œë¦¬ ì‹¤ì‹œê°„ ê³„ì‚°
- **ë°±ê·¸ë¼ìš´ë“œ ì¶”ì **: ì•±ì´ ë°±ê·¸ë¼ìš´ë“œì— ìˆì–´ë„ ì—°ì†ì ì¸ ìœ„ì¹˜ ì¶”ì 
- **ì‹¬ë°•ìˆ˜ ëª¨ë‹ˆí„°ë§**: HealthKitì„ í†µí•œ ì‹¤ì‹œê°„ ì‹¬ë°•ìˆ˜ ë°ì´í„° ìˆ˜ì§‘
- **ê²½ë¡œ ì‹œê°í™”**: MapKitì„ í™œìš©í•œ ëŸ¬ë‹ ê²½ë¡œ í‘œì‹œ ë° ì†ë„ë³„ ìƒ‰ìƒ êµ¬ë¶„

### ğŸŒ¤ï¸ ìŠ¤ë§ˆíŠ¸ ë‚ ì”¨ ì •ë³´
- **ì‹¤ì‹œê°„ ë‚ ì”¨**: OpenWeatherMap APIë¥¼ í†µí•œ í˜„ì¬ ë‚ ì”¨ ì •ë³´
- **ì‹œê°„ë³„ ì˜ˆë³´**: 3ì‹œê°„ ë‹¨ìœ„ ë‚ ì”¨ ì˜ˆë³´ ì œê³µ
- **ëŒ€ê¸°ì§ˆ ì •ë³´**: PM2.5, PM10 ë“± ëŒ€ê¸°ì§ˆ ì§€ìˆ˜ ì œê³µ
- **ìœ„ì¹˜ ê¸°ë°˜**: GPS ìœ„ì¹˜ì— ë”°ë¥¸ ì •í™•í•œ ë‚ ì”¨ ì •ë³´

### ğŸ“Š ë°ì´í„° ê´€ë¦¬
- **CoreData ì €ì¥**: ëª¨ë“  ëŸ¬ë‹ ê¸°ë¡ì˜ ì•ˆì „í•œ ë¡œì»¬ ì €ì¥
- **HealthKit ì—°ë™**: iOS Health ì•±ê³¼ ë°ì´í„° ë™ê¸°í™”
- **ìƒì„¸ ê¸°ë¡**: ëŸ¬ë‹ ì‹œê°„, ê±°ë¦¬, ì¹¼ë¡œë¦¬, í‰ê·  í˜ì´ìŠ¤, ê²½ë¡œ ì •ë³´ ì €ì¥
- **ê¸°ë¡ ëª©ë¡**: ê³¼ê±° ëŸ¬ë‹ ê¸°ë¡ ì¡°íšŒ ë° ê´€ë¦¬

### ğŸ›ï¸ ìœ„ì ¯ ì§€ì›
- **í™ˆ ìŠ¤í¬ë¦° ìœ„ì ¯**: í˜„ì¬ ëŸ¬ë‹ ìƒíƒœë¥¼ í™ˆ ìŠ¤í¬ë¦°ì—ì„œ ë°”ë¡œ í™•ì¸
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ëŸ¬ë‹ ì¤‘ ìœ„ì ¯ ë°ì´í„° ìë™ ê°±ì‹ 
- **ê°„í¸ ì œì–´**: ìœ„ì ¯ì—ì„œ ì§ì ‘ ëŸ¬ë‹ ì‹œì‘/ì¼ì‹œì •ì§€ ê°€ëŠ¥

### ğŸŒ ë‹¤êµ­ì–´ ì§€ì›
- **3ê°œ ì–¸ì–´**: í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´ ì§€ì›
- **ë¡œì»¬ë¼ì´ì œì´ì…˜**: ëª¨ë“  UI í…ìŠ¤íŠ¸ ë° ë©”ì‹œì§€ í˜„ì§€í™”
- **ì§€ì—­ ë§ì¶¤**: ë‚ ì§œ/ì‹œê°„ í˜•ì‹ ë“± ì§€ì—­ë³„ í‘œì‹œ í˜•ì‹ ì§€ì›

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### ğŸ—ï¸ ì•„í‚¤í…ì²˜
- **Clean Architecture**: ê´€ì‹¬ì‚¬ ë¶„ë¦¬ì™€ ì˜ì¡´ì„± ì—­ì „ì„ í†µí•œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- **TCA (The Composable Architecture)**: TCA ê¸°ë°˜ì˜ ë‹¨ë°©í–¥ ì•„í‚¤í…ì²˜ë¡œ ë°ì´í„° í”Œë¡œìš° ê´€ë¦¬

### ğŸ“± í”„ë ˆì„ì›Œí¬ & ë¼ì´ë¸ŒëŸ¬ë¦¬
- **SwiftUI**: ì„ ì–¸ì  UI í”„ë ˆì„ì›Œí¬
- **UIKit**: ë„¤ì´í‹°ë¸Œ iOS ì»´í¬ë„ŒíŠ¸
- **MapKit**: ì§€ë„ ë° ìœ„ì¹˜ ì„œë¹„ìŠ¤
- **HealthKit**: ê±´ê°• ë°ì´í„° í†µí•©
- **CoreData**: ë¡œì»¬ ë°ì´í„° ì €ì¥
- **CoreLocation**: ìœ„ì¹˜ ì¶”ì  ë° ì§€ì˜¤ì½”ë”©
- **WidgetKit**: ìœ„ì ¯ ê°œë°œ í”„ë ˆì„ì›Œí¬
- **Combine**: ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë°

### ğŸ”§ ì‚¬ìš© ê¸°ìˆ 
- **Kalman Filter**: GPS ì‹ í˜¸ ë…¸ì´ì¦ˆ ì œê±° ë° ìœ„ì¹˜ ì •í™•ë„ ê°œì„ 
- **AsyncSequence**: ë¹„ë™ê¸° ìœ„ì¹˜ ì—…ë°ì´íŠ¸ ìŠ¤íŠ¸ë¦¼
- **Background Location**: ë°±ê·¸ë¼ìš´ë“œ ìœ„ì¹˜ ì¶”ì 
- **App Groups**: ì•±ê³¼ ìœ„ì ¯ ê°„ ë°ì´í„° ê³µìœ 
- **Async/Await**: ëª¨ë˜ Swift ë¹„ë™ê¸° ì²˜ë¦¬

### ğŸŒ ì™¸ë¶€ API
- **OpenWeatherMap API**: ë‚ ì”¨ ì •ë³´ ë° ëŒ€ê¸°ì§ˆ ë°ì´í„°
  - Current Weather API: ì‹¤ì‹œê°„ ë‚ ì”¨
  - Forecast API: ì‹œê°„ë³„ ì˜ˆë³´
  - Air Pollution API: ëŒ€ê¸°ì§ˆ ì •ë³´

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
RunningLog/
â”œâ”€â”€ App/                          # ì•± ì§„ì…ì  ë° ì„¤ì •
â”‚   â””â”€â”€ RunningLogApp.swift      # ë©”ì¸ ì•± í´ë˜ìŠ¤
â”œâ”€â”€ Domain/                       # ë„ë©”ì¸ ë ˆì´ì–´
â”‚   â”œâ”€â”€ Entity/                  # ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ RunningSession.swift
â”‚   â”‚   â”œâ”€â”€ RunningRecord.swift
â”‚   â”‚   â”œâ”€â”€ WeatherData.swift
â”‚   â”‚   â””â”€â”€ UserProfile.swift
â”‚   â”œâ”€â”€ Repository/              # ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤
â”‚   â””â”€â”€ Client/                  # ì™¸ë¶€ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ Data/                        # ë°ì´í„° ë ˆì´ì–´
â”‚   â”œâ”€â”€ Service/                 # ë„¤íŠ¸ì›Œí‚¹ ë° ë°ì´í„° ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ NetworkService.swift
â”‚   â”‚   â”œâ”€â”€ DataTransferService.swift
â”‚   â”‚   â””â”€â”€ LocationClientImpl.swift
â”‚   â”œâ”€â”€ Router/                  # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ WeatherRouter.swift
â”‚   â”‚   â”œâ”€â”€ WeatherForecastRouter.swift
â”‚   â”‚   â””â”€â”€ WeatherNowRouter.swift
â”‚   â””â”€â”€ Repository/              # ë¦¬í¬ì§€í† ë¦¬ êµ¬í˜„
â”‚       â””â”€â”€ CoreDataRunningRecordRepository.swift
â”œâ”€â”€ Present/                     # í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´
â”‚   â”œâ”€â”€ Tab/                     # íƒ­ ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”œâ”€â”€ Running/                 # ëŸ¬ë‹ ì¶”ì  í™”ë©´
â”‚   â”‚   â”œâ”€â”€ RunningView.swift
â”‚   â”‚   â”œâ”€â”€ RunningFeature.swift
â”‚   â”‚   â”œâ”€â”€ MapView.swift
â”‚   â”‚   â””â”€â”€ MapKitView.swift
â”‚   â”œâ”€â”€ Weather/                 # ë‚ ì”¨ í™”ë©´
â”‚   â”‚   â”œâ”€â”€ WeatherView.swift
â”‚   â”‚   â””â”€â”€ WeatherFeature.swift
â”‚   â”œâ”€â”€ RunningRecordList/       # ê¸°ë¡ ëª©ë¡ í™”ë©´
â”‚   â””â”€â”€ Component/               # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â””â”€â”€ Utility/                     # ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ KalmanFilterManager.swift # GPS í•„í„°ë§
    â”œâ”€â”€ Design.swift             # ë””ìì¸ ì‹œìŠ¤í…œ
    â””â”€â”€ ViewModifier/            # ì»¤ìŠ¤í…€ ë·° ëª¨ë””íŒŒì´ì–´

RunningWidget/                   # ìœ„ì ¯ í™•ì¥
â”œâ”€â”€ RunningWidget.swift         # ìœ„ì ¯ ë©”ì¸
â””â”€â”€ RunningWidgetBundle.swift   # ìœ„ì ¯ ë²ˆë“¤
```

## ğŸš€ ì£¼ìš” ê¸°ìˆ ì  íŠ¹ì§•

### 1. Kalman Filter ê¸°ë°˜ GPS ì •í™•ë„ í–¥ìƒ
```swift
final class DefaultKalmanFilterManager: KalmanFilterManagerProtocol {
    private let filter = KalmanFilter2D(processNoise: 1e-2, measurementNoise: 1e-3)
    private let maxHumanSpeed: CLLocationSpeed = 20.0 // m/s
    private let minSpeed: CLLocationSpeed = 0.3 // 0.3m/s(1km/h) ë¯¸ë§Œ ë¬´ì‹œ
    
    func filter(location: CLLocation) -> CLLocation? {
        // ì´ìƒì¹˜ ìœ„ì¹˜ ì œê±° ë° ì¹¼ë§Œ í•„í„° ì ìš©
    }
}
```

### 2. TCA ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
```swift
@Reducer
struct RunningFeature {
    @ObservableState
    struct State: Equatable {
        var session: RunningSession = .init()
        var pathLocations: [CLLocation] = []
        var isLoading = false
    }
    
    enum Action {
        case startRunning
        case stopRunning
        case updateLocation(CLLocation)
        case timerTick
    }
}
```

### 3. ë°±ê·¸ë¼ìš´ë“œ ìœ„ì¹˜ ì¶”ì 
- `UIBackgroundModes`: location ëª¨ë“œ í™œì„±í™”
- `allowsBackgroundLocationUpdates`: ë°±ê·¸ë¼ìš´ë“œ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ í—ˆìš©
- `pausesLocationUpdatesAutomatically`: ìë™ ì¼ì‹œì •ì§€ ë¹„í™œì„±í™”

### 4. ìœ„ì ¯ê³¼ ì•± ê°„ ë°ì´í„° ê³µìœ 
```swift
// App Groupsë¥¼ í†µí•œ ë°ì´í„° ê³µìœ 
let sharedDefaults = UserDefaults(suiteName: "group.den.RunningLog.shared")
sharedDefaults?.set(formattedTime, forKey: "time")
WidgetCenter.shared.reloadTimelines(ofKind: "RunningWidget")
```

## ğŸ“‹ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

- **iOS**: 17.0 ì´ìƒ
- **Xcode**: 15.0 ì´ìƒ
- **Swift**: 5.9 ì´ìƒ
- **ê¶Œí•œ**: ìœ„ì¹˜, HealthKit, ë°±ê·¸ë¼ìš´ë“œ ìœ„ì¹˜ ì¶”ì 

### 4. ì˜ì¡´ì„± ì„¤ì¹˜
- TCA (The Composable Architecture)ëŠ” Swift Package Managerë¥¼ í†µí•´ ìë™ ì„¤ì¹˜ë©ë‹ˆë‹¤.

### 5. ë¹Œë“œ ë° ì‹¤í–‰
- ë¬¼ë¦¬ ê¸°ê¸°ì—ì„œ ì‹¤í–‰ (ì‹œë®¬ë ˆì´í„°ì—ì„œëŠ” GPS ê¸°ëŠ¥ ì œí•œ)
- HealthKit ê¶Œí•œ í—ˆìš© í•„ìš”

---
